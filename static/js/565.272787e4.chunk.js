(self.webpackChunkfamilyDirectory=self.webpackChunkfamilyDirectory||[]).push([[565],{3565:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthApiError:function(){return We},AuthError:function(){return Ke},AuthImplicitGrantRedirectError:function(){return et},AuthInvalidCredentialsError:function(){return Qe},AuthRetryableFetchError:function(){return tt},AuthSessionMissingError:function(){return $e},AuthUnknownError:function(){return Xe},CustomAuthError:function(){return Ye},FunctionsError:function(){return E},FunctionsFetchError:function(){return T},FunctionsHttpError:function(){return S},FunctionsRelayError:function(){return Z},GoTrueAdminApi:function(){return pt},GoTrueClient:function(){return xt},REALTIME_LISTEN_TYPES:function(){return X},REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:function(){return W},REALTIME_PRESENCE_LISTEN_EVENTS:function(){return H},REALTIME_SUBSCRIBE_STATES:function(){return Y},RealtimeChannel:function(){return ce},RealtimeClient:function(){return le},RealtimePresence:function(){return V},SupabaseClient:function(){return jt},createClient:function(){return Pt},isAuthError:function(){return Ve}});var n=r(4165),i=r(5671),s=r(3144),o=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},a=function(e){var t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return o(void 0,void 0,void 0,(0,n.Z)().mark((function e(){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,4255,23));case 2:return e.next=4,(i=e.sent).fetch.apply(i,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))}:fetch),function(){return t.apply(void 0,arguments)}},c=r(7326),u=r(136),h=r(7277),l=r(1120);var f=r(4942);function d(e,t,r,n){return d="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var i,s=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,l.Z)(e)););return e}(e,t);if(s){if((i=Object.getOwnPropertyDescriptor(s,t)).set)return i.set.call(n,r),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(n,t)){if(!i.writable)return!1;i.value=r,Object.defineProperty(n,t,i)}else(0,f.Z)(n,t,r);return!0},d(e,t,r,n)}function v(e,t,r,n,i){if(!d(e,t,r,n||e)&&i)throw new Error("failed to set property");return r}var p=r(9611);var b=r(8814);function y(e,t,r){return y=(0,b.Z)()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&(0,p.Z)(i,r.prototype),i},y.apply(null,arguments)}function m(e){var t="function"===typeof Map?new Map:void 0;return m=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return y(e,arguments,(0,l.Z)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,p.Z)(n,e)},m(e)}var k,g,w,x,_,E=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){var n,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",a=arguments.length>2?arguments[2]:void 0;return(0,i.Z)(this,r),s=t.call(this,e),v((n=(0,c.Z)(s),(0,l.Z)(r.prototype)),"name",o,n,!0),s.context=a,s}return(0,s.Z)(r)}(m(Error)),T=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){return(0,i.Z)(this,r),t.call(this,"Failed to send a request to the Edge Function","FunctionsFetchError",e)}return(0,s.Z)(r)}(E),Z=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){return(0,i.Z)(this,r),t.call(this,"Relay Error invoking the Edge Function","FunctionsRelayError",e)}return(0,s.Z)(r)}(E),S=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){return(0,i.Z)(this,r),t.call(this,"Edge Function returned a non-2xx status code","FunctionsHttpError",e)}return(0,s.Z)(r)}(E),O=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},j=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.headers,s=void 0===n?{}:n,o=r.customFetch;(0,i.Z)(this,e),this.url=t,this.headers=s,this.fetch=a(o)}return(0,s.Z)(e,[{key:"setAuth",value:function(e){this.headers.Authorization="Bearer ".concat(e)}},{key:"invoke",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return O(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o,a,c,u,h,l,f;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=r.headers,o=r.body,a={},o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!==typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):"string"===typeof o?(a["Content-Type"]="text/plain",c=o):"undefined"!==typeof FormData&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o))),n.next=6,this.fetch("".concat(this.url,"/").concat(e),{method:"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch((function(e){throw new T(e)}));case 6:if(u=n.sent,!(h=u.headers.get("x-relay-error"))||"true"!==h){n.next=10;break}throw new Z(u);case 10:if(u.ok){n.next=12;break}throw new S(u);case 12:if("application/json"!==(l=(null!==(t=u.headers.get("Content-Type"))&&void 0!==t?t:"text/plain").split(";")[0].trim())){n.next=19;break}return n.next=16,u.json();case 16:f=n.sent,n.next=34;break;case 19:if("application/octet-stream"!==l){n.next=25;break}return n.next=22,u.blob();case 22:f=n.sent,n.next=34;break;case 25:if("multipart/form-data"!==l){n.next=31;break}return n.next=28,u.formData();case 28:f=n.sent,n.next=34;break;case 31:return n.next=33,u.text();case 33:f=n.sent;case 34:return n.abrupt("return",{data:f,error:null});case 37:return n.prev=37,n.t0=n.catch(0),n.abrupt("return",{data:null,error:n.t0});case 40:case"end":return n.stop()}}),i,this,[[0,37]])})))}}]),e}(),P=r(9439),R=r(3433),A=r(4255),C=r.n(A),I=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},U=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r,[{key:"select",value:function(e){var t=!1,r=(null!==e&&void 0!==e?e:"*").split("").map((function(e){return/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)})).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}},{key:"order",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ascending,n=void 0===r||r,i=t.nullsFirst,s=t.foreignTable,o=s?"".concat(s,".order"):"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,"".concat(a?"".concat(a,","):"").concat(e,".").concat(n?"asc":"desc").concat(void 0===i?"":i?".nullsfirst":".nullslast")),this}},{key:"limit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.foreignTable,n="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this}},{key:"range",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.foreignTable,i="undefined"===typeof n?"offset":"".concat(n,".offset"),s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(i,"".concat(e)),this.url.searchParams.set(s,"".concat(t-e+1)),this}},{key:"abortSignal",value:function(e){return this.signal=e,this}},{key:"single",value:function(){return this.headers.Accept="application/vnd.pgrst.object+json",this}},{key:"maybeSingle",value:function(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}},{key:"csv",value:function(){return this.headers.Accept="text/csv",this}},{key:"geojson",value:function(){return this.headers.Accept="application/geo+json",this}},{key:"explain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.analyze,r=void 0!==t&&t,n=e.verbose,i=void 0!==n&&n,s=e.settings,o=void 0!==s&&s,a=e.buffers,c=void 0!==a&&a,u=e.wal,h=void 0!==u&&u,l=e.format,f=void 0===l?"text":l,d=[r?"analyze":null,i?"verbose":null,o?"settings":null,c?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=this.headers.Accept;return this.headers.Accept="application/vnd.pgrst.plan+".concat(f,'; for="').concat(v,'"; options=').concat(d,";"),this}},{key:"rollback",value:function(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}},{key:"returns",value:function(){return this}}]),r}(function(){function e(t){(0,i.Z)(this,e),this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.allowEmpty=t.allowEmpty,t.fetch?this.fetch=t.fetch:"undefined"===typeof fetch?this.fetch=C():this.fetch=fetch}return(0,s.Z)(e,[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"then",value:function(e,t){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");var i=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((function(e){return I(r,void 0,void 0,(0,n.Z)().mark((function t(){var r,i,s,o,a,c,u,h,l,f,d,v,p;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null,a=null,c=null,u=e.status,h=e.statusText,!e.ok){t.next=16;break}if("HEAD"===this.method){t.next=11;break}return t.next=9,e.text();case 9:""===(l=t.sent)||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?l:JSON.parse(l));case 11:f=null===(r=this.headers.Prefer)||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),d=null===(i=e.headers.get("content-range"))||void 0===i?void 0:i.split("/"),f&&d&&d.length>1&&(c=parseInt(d[1])),t.next=23;break;case 16:return t.next=18,e.text();case 18:v=t.sent;try{o=JSON.parse(v)}catch(n){o={message:v}}if(o&&this.allowEmpty&&(null===(s=null===o||void 0===o?void 0:o.details)||void 0===s?void 0:s.includes("Results contain 0 rows"))&&(o=null,u=200,h="OK"),!o||!this.shouldThrowOnError){t.next=23;break}throw o;case 23:return p={error:o,data:a,count:c,status:u,statusText:h},t.abrupt("return",p);case 25:case"end":return t.stop()}}),t,this)})))}));return this.shouldThrowOnError||(i=i.catch((function(e){return{error:{message:"FetchError: ".concat(e.message),details:"",hint:"",code:e.code||""},data:null,count:null,status:0,statusText:""}}))),i.then(e,t)}}]),e}()),D=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r,[{key:"eq",value:function(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}},{key:"neq",value:function(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}},{key:"gt",value:function(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}},{key:"gte",value:function(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}},{key:"lt",value:function(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}},{key:"lte",value:function(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}},{key:"like",value:function(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}},{key:"ilike",value:function(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}},{key:"is",value:function(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}},{key:"in",value:function(e,t){var r=t.map((function(e){return"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)})).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}},{key:"contains",value:function(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}},{key:"containedBy",value:function(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}},{key:"rangeGt",value:function(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}},{key:"rangeGte",value:function(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}},{key:"rangeLt",value:function(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}},{key:"rangeLte",value:function(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}},{key:"rangeAdjacent",value:function(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}},{key:"overlaps",value:function(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}},{key:"textSearch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.config,i=r.type,s="";"plain"===i?s="pl":"phrase"===i?s="ph":"websearch"===i&&(s="w");var o=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(s,"fts").concat(o,".").concat(t)),this}},{key:"match",value:function(e){var t=this;return Object.entries(e).forEach((function(e){var r=(0,P.Z)(e,2),n=r[0],i=r[1];t.url.searchParams.append(n,"eq.".concat(i))})),this}},{key:"not",value:function(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}},{key:"or",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.foreignTable,n=r?"".concat(r,".or"):"or";return this.url.searchParams.append(n,"(".concat(e,")")),this}},{key:"filter",value:function(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}]),r}(U),L=function(){function e(t,r){var n=r.headers,s=void 0===n?{}:n,o=r.schema,a=r.fetch;(0,i.Z)(this,e),this.url=t,this.headers=s,this.schema=o,this.fetch=a}return(0,s.Z)(e,[{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.head,n=void 0!==r&&r,i=t.count,s=n?"HEAD":"GET",o=!1,a=(null!==e&&void 0!==e?e:"*").split("").map((function(e){return/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)})).join("");return this.url.searchParams.set("select",a),i&&(this.headers.Prefer="count=".concat(i)),new D({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}},{key:"insert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.count,n="POST",i=[],s=e;if(r&&i.push("count=".concat(r)),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),Array.isArray(e)){var o=e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]);if(o.length>0){var a=(0,R.Z)(new Set(o)).map((function(e){return'"'.concat(e,'"')}));this.url.searchParams.set("columns",a.join(","))}}return new D({method:n,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}},{key:"upsert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onConflict,n=t.ignoreDuplicates,i=void 0!==n&&n,s=t.count,o="POST",a=["resolution=".concat(i?"ignore":"merge","-duplicates")];void 0!==r&&this.url.searchParams.set("on_conflict",r);var c=e;return s&&a.push("count=".concat(s)),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new D({method:o,url:this.url,headers:this.headers,schema:this.schema,body:c,fetch:this.fetch,allowEmpty:!1})}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.count,n="PATCH",i=[],s=e;return r&&i.push("count=".concat(r)),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new D({method:n,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.count,r="DELETE",n=[];return t&&n.push("count=".concat(t)),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new D({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}]),e}(),N={"X-Client-Info":"postgrest-js/".concat("1.1.0")},B=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.headers,s=void 0===n?{}:n,o=r.schema,a=r.fetch;(0,i.Z)(this,e),this.url=t,this.headers=Object.assign(Object.assign({},N),s),this.schema=o,this.fetch=a}return(0,s.Z)(e,[{key:"from",value:function(e){var t=new URL("".concat(this.url,"/").concat(e));return new L(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}},{key:"rpc",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.head,o=void 0!==s&&s,a=i.count,c=new URL("".concat(this.url,"/rpc/").concat(e));o?(t="HEAD",Object.entries(n).forEach((function(e){var t=(0,P.Z)(e,2),r=t[0],n=t[1];c.searchParams.append(r,"".concat(n))}))):(t="POST",r=n);var u=Object.assign({},this.headers);return a&&(u.Prefer="count=".concat(a)),new D({method:t,url:c,headers:u,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}}]),e}(),F=r(5087),M={"X-Client-Info":"realtime-js/".concat("2.1.0")},J=1e4;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(k||(k={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(g||(g={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(w||(w={})),function(e){e.websocket="websocket"}(x||(x={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(_||(_={}));var H,G=function(){function e(t,r){(0,i.Z)(this,e),this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}return(0,s.Z)(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),z=function(){function e(){(0,i.Z)(this,e),this.HEADER_LENGTH=1}return(0,s.Z)(e,[{key:"decode",value:function(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}},{key:"_binaryDecode",value:function(e){var t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}},{key:"_decodeBroadcast",value:function(e,t,r){var n=t.getUint8(1),i=t.getUint8(2),s=this.HEADER_LENGTH+2,o=r.decode(e.slice(s,s+n));s+=n;var a=r.decode(e.slice(s,s+i));return s+=i,{ref:null,topic:o,event:a,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}]),e}(),q=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:J;(0,i.Z)(this,e),this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}return(0,s.Z)(e,[{key:"resend",value:function(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}},{key:"send",value:function(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,"rate limited"===this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})&&(this.rateLimited=!0))}},{key:"updatePayload",value:function(e){this.payload=Object.assign(Object.assign({},this.payload),e)}},{key:"receive",value:function(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}},{key:"startTimeout",value:function(){var e=this;if(!this.timeoutTimer){this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(function(t){e._cancelRefEvent(),e._cancelTimeout(),e.receivedResp=t,e._matchReceive(t)})),this.timeoutTimer=setTimeout((function(){e.trigger("timeout",{})}),this.timeout)}}},{key:"trigger",value:function(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}},{key:"destroy",value:function(){this._cancelRefEvent(),this._cancelTimeout()}},{key:"_cancelRefEvent",value:function(){this.refEvent&&this.channel._off(this.refEvent,{})}},{key:"_cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}},{key:"_matchReceive",value:function(e){var t=e.status,r=e.response;this.recHooks.filter((function(e){return e.status===t})).forEach((function(e){return e.callback(r)}))}},{key:"_hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}}]),e}();!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(H||(H={}));var K,V=function(){function e(t,r){var n=this;(0,i.Z)(this,e),this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}};var s=(null===r||void 0===r?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},(function(t){var r=n.caller,i=r.onJoin,s=r.onLeave,o=r.onSync;n.joinRef=n.channel._joinRef(),n.state=e.syncState(n.state,t,i,s),n.pendingDiffs.forEach((function(t){n.state=e.syncDiff(n.state,t,i,s)})),n.pendingDiffs=[],o()})),this.channel._on(s.diff,{},(function(t){var r=n.caller,i=r.onJoin,s=r.onLeave,o=r.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,i,s),o())})),this.onJoin((function(e,t,r){n.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})})),this.onLeave((function(e,t,r){n.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})})),this.onSync((function(){n.channel._trigger("presence",{event:"sync"})}))}return(0,s.Z)(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}],[{key:"syncState",value:function(e,t,r,n){var i=this.cloneDeep(e),s=this.transformState(t),o={},a={};return this.map(i,(function(e,t){s[e]||(a[e]=t)})),this.map(s,(function(e,t){var r=i[e];if(r){var n=t.map((function(e){return e.presence_ref})),s=r.map((function(e){return e.presence_ref})),c=t.filter((function(e){return s.indexOf(e.presence_ref)<0})),u=r.filter((function(e){return n.indexOf(e.presence_ref)<0}));c.length>0&&(o[e]=c),u.length>0&&(a[e]=u)}else o[e]=t})),this.syncDiff(i,{joins:o,leaves:a},r,n)}},{key:"syncDiff",value:function(e,t,r,n){var i=this,s={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)},o=s.joins,a=s.leaves;return r||(r=function(){}),n||(n=function(){}),this.map(o,(function(t,n){var s,o=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=i.cloneDeep(n),o.length>0){var a,c=e[t].map((function(e){return e.presence_ref})),u=o.filter((function(e){return c.indexOf(e.presence_ref)<0}));(a=e[t]).unshift.apply(a,(0,R.Z)(u))}r(t,o,n)})),this.map(a,(function(t,r){var i=e[t];if(i){var s=r.map((function(e){return e.presence_ref}));i=i.filter((function(e){return s.indexOf(e.presence_ref)<0})),e[t]=i,n(t,i,r),0===i.length&&delete e[t]}})),e}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map((function(r){return t(r,e[r])}))}},{key:"transformState",value:function(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((function(t,r){var n=e[r];return t[r]="metas"in n?n.metas.map((function(e){return e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e})):n,t}),{})}},{key:"cloneDeep",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}();!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(K||(K={}));var W,X,Y,$=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((function(r,n){return r[n]=Q(n,e,t,i),r}),{})},Q=function(e,t,r,n){var i=t.find((function(t){return t.name===e})),s=null===i||void 0===i?void 0:i.type,o=r[e];return s&&!n.includes(s)?ee(s,o):te(o)},ee=function(e,t){if("_"===e.charAt(0)){var r=e.slice(1,e.length);return se(t,r)}switch(e){case K.bool:return re(t);case K.float4:case K.float8:case K.int2:case K.int4:case K.int8:case K.numeric:case K.oid:return ne(t);case K.json:case K.jsonb:return ie(t);case K.timestamp:return oe(t);case K.abstime:case K.date:case K.daterange:case K.int4range:case K.int8range:case K.money:case K.reltime:case K.text:case K.time:case K.timestamptz:case K.timetz:case K.tsrange:case K.tstzrange:default:return te(t)}},te=function(e){return e},re=function(e){switch(e){case"t":return!0;case"f":return!1;default:return e}},ne=function(e){if("string"===typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ie=function(e){if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},se=function(e,t){if("string"!==typeof e)return e;var r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){var i,s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch(o){i=s?s.split(","):[]}return i.map((function(e){return ee(t,e)}))}return e},oe=function(e){return"string"===typeof e?e.replace(" ","T"):e},ae=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(W||(W={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(X||(X={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Y||(Y={}));var ce=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},s=arguments.length>2?arguments[2]:void 0;(0,i.Z)(this,e),this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=g.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},n.config),this.timeout=this.socket.timeout,this.joinPush=new q(this,w.join,this.params,this.timeout),this.rejoinTimer=new G((function(){return r._rejoinUntilConnected()}),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(function(){r.state=g.joined,r.rejoinTimer.reset(),r.pushBuffer.forEach((function(e){return e.send()})),r.pushBuffer=[]})),this._onClose((function(){r.rejoinTimer.reset(),r.socket.log("channel","close ".concat(r.topic," ").concat(r._joinRef())),r.state=g.closed,r.socket._remove(r)})),this._onError((function(e){r._isLeaving()||r._isClosed()||(r.socket.log("channel","error ".concat(r.topic),e),r.state=g.errored,r.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(function(){r._isJoining()&&(r.socket.log("channel","timeout ".concat(r.topic),r.joinPush.timeout),r.state=g.errored,r.rejoinTimer.scheduleTimeout())})),this._on(w.reply,{},(function(e,t){r._trigger(r._replyEventName(t),e)})),this.presence=new V(this)}return(0,s.Z)(e,[{key:"subscribe",value:function(e){var t,r,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";var s=this.params.config,o=s.broadcast,a=s.presence;this._onError((function(t){return e&&e("CHANNEL_ERROR",t)})),this._onClose((function(){return e&&e("CLOSED")}));var c={},u={broadcast:o,presence:a,postgres_changes:null!==(r=null===(t=this.bindings.postgres_changes)||void 0===t?void 0:t.map((function(e){return e.filter})))&&void 0!==r?r:[]};return this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",(function(t){var r,i=t.postgres_changes;if(n.socket.accessToken&&n.socket.setAuth(n.socket.accessToken),void 0!==i){for(var s=n.bindings.postgres_changes,o=null!==(r=null===s||void 0===s?void 0:s.length)&&void 0!==r?r:0,a=[],c=0;c<o;c++){var u=s[c],h=u.filter,l=h.event,f=h.schema,d=h.table,v=h.filter,p=i&&i[c];if(!p||p.event!==l||p.schema!==f||p.table!==d||p.filter!==v)return n.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},u),{id:p.id}))}return n.bindings.postgres_changes=a,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(function(t){e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(function(){e&&e("TIMED_OUT")})),this}},{key:"presenceState",value:function(){return this.presence.state}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ae(this,void 0,void 0,(0,n.Z)().mark((function r(){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"untrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ae(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send({type:"presence",event:"untrack"},e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"on",value:function(e,t,r){return this._on(e,t,r)}},{key:"send",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){var i,s,o,a=t._push(e.type,e,r.timeout||t.timeout);a.rateLimited&&n("rate limited"),"broadcast"!==e.type||(null===(o=null===(s=null===(i=t.params)||void 0===i?void 0:i.config)||void 0===s?void 0:s.broadcast)||void 0===o?void 0:o.ack)||n("ok"),a.receive("ok",(function(){return n("ok")})),a.receive("timeout",(function(){return n("timed out")}))}))}},{key:"updateJoinPayload",value:function(e){this.joinPush.updatePayload(e)}},{key:"unsubscribe",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=g.leaving;var r=function(){e.socket.log("channel","leave ".concat(e.topic)),e._trigger(w.close,"leave",e._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((function(n){var i=new q(e,w.leave,{},t);i.receive("ok",(function(){r(),n("ok")})).receive("timeout",(function(){r(),n("timed out")})).receive("error",(function(){n("error")})),i.send(),e._canPush()||i.trigger("ok",{})}))}},{key:"_push",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");var n=new q(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}},{key:"_onMessage",value:function(e,t,r){return t}},{key:"_isMember",value:function(e){return this.topic===e}},{key:"_joinRef",value:function(){return this.joinPush.ref}},{key:"_trigger",value:function(e,t,r){var n,i,s=this,o=e.toLocaleLowerCase(),a=w.close,c=w.error,u=w.leave,h=w.join;if(!(r&&[a,c,u,h].indexOf(o)>=0&&r!==this._joinRef())){var l=this._onMessage(o,t,r);if(t&&!l)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((function(e){var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===o})).map((function(e){return e.callback(l,r)})):null===(i=this.bindings[o])||void 0===i||i.filter((function(e){var r,n,i,s,a,c;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){var u=e.id,h=null===(r=e.filter)||void 0===r?void 0:r.event;return u&&(null===(n=t.ids)||void 0===n?void 0:n.includes(u))&&("*"===h||(null===h||void 0===h?void 0:h.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}var l=null===(a=null===(s=null===e||void 0===e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===l||l===(null===(c=null===t||void 0===t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}return e.type.toLocaleLowerCase()===o})).map((function(e){if("object"===typeof l&&"ids"in l){var t=l.data,n={schema:t.schema,table:t.table,commit_timestamp:t.commit_timestamp,eventType:t.type,new:{},old:{},errors:t.errors};l=Object.assign(Object.assign({},n),s._getPayloadRecords(t))}e.callback(l,r)}))}}},{key:"_isClosed",value:function(){return this.state===g.closed}},{key:"_isJoined",value:function(){return this.state===g.joined}},{key:"_isJoining",value:function(){return this.state===g.joining}},{key:"_isLeaving",value:function(){return this.state===g.leaving}},{key:"_replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"_on",value:function(e,t,r){var n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}},{key:"_off",value:function(t,r){var n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((function(t){var i;return!((null===(i=t.type)||void 0===i?void 0:i.toLocaleLowerCase())===n&&e.isEqual(t.filter,r))})),this}},{key:"_rejoinUntilConnected",value:function(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}},{key:"_onClose",value:function(e){this._on(w.close,{},e)}},{key:"_onError",value:function(e){this._on(w.error,{},(function(t){return e(t)}))}},{key:"_canPush",value:function(){return this.socket.isConnected()&&this._isJoined()}},{key:"_rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=g.joining,this.joinPush.resend(e))}},{key:"_getPayloadRecords",value:function(e){var t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=$(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=$(e.columns,e.old_record)),t}}],[{key:"isEqual",value:function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}}]),e}(),ue=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},he=function(){},le=function(){function e(t,r){var s,o=this;(0,i.Z)(this,e),this.accessToken=null,this.channels=[],this.endPoint="",this.headers=M,this.params={},this.timeout=J,this.transport=F.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=he,this.conn=null,this.sendBuffer=[],this.serializer=new z,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint="".concat(t,"/").concat(x.websocket),(null===r||void 0===r?void 0:r.params)&&(this.params=r.params),(null===r||void 0===r?void 0:r.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),(null===r||void 0===r?void 0:r.timeout)&&(this.timeout=r.timeout),(null===r||void 0===r?void 0:r.logger)&&(this.logger=r.logger),(null===r||void 0===r?void 0:r.transport)&&(this.transport=r.transport),(null===r||void 0===r?void 0:r.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);var a=null===(s=null===r||void 0===r?void 0:r.params)||void 0===s?void 0:s.eventsPerSecond;a&&(this.eventsPerSecondLimitMs=Math.floor(1e3/a)),this.reconnectAfterMs=(null===r||void 0===r?void 0:r.reconnectAfterMs)?r.reconnectAfterMs:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4},this.encode=(null===r||void 0===r?void 0:r.encode)?r.encode:function(e,t){return t(JSON.stringify(e))},this.decode=(null===r||void 0===r?void 0:r.decode)?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new G((function(){return ue(o,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.disconnect(),this.connect();case 2:case"end":return e.stop()}}),e,this)})))}),this.reconnectAfterMs)}return(0,s.Z)(e,[{key:"connect",value:function(){var e=this;this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=function(){return e._onConnOpen()},this.conn.onerror=function(t){return e._onConnError(t)},this.conn.onmessage=function(t){return e._onConnMessage(t)},this.conn.onclose=function(t){return e._onConnClose(t)}))}},{key:"disconnect",value:function(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}},{key:"getChannels",value:function(){return this.channels}},{key:"removeChannel",value:function(e){var t=this;return e.unsubscribe().then((function(e){return 0===t.channels.length&&t.disconnect(),e}))}},{key:"removeAllChannels",value:function(){var e=this;return Promise.all(this.channels.map((function(e){return e.unsubscribe()}))).then((function(t){return e.disconnect(),t}))}},{key:"log",value:function(e,t,r){this.logger(e,t,r)}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case k.connecting:return _.Connecting;case k.open:return _.Open;case k.closing:return _.Closing;default:return _.Closed}}},{key:"isConnected",value:function(){return this.connectionState()===_.Open}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};this.isConnected()||this.connect();var r=new ce("realtime:".concat(e),t,this);return this.channels.push(r),r}},{key:"push",value:function(e){var t=this,r=e.topic,n=e.event,i=e.payload,s=e.ref,o=function(){t.encode(e,(function(e){var r;null===(r=t.conn)||void 0===r||r.send(e)}))};if(this.log("push","".concat(r," ").concat(n," (").concat(s,")"),i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}},{key:"setAuth",value:function(e){this.accessToken=e,this.channels.forEach((function(t){e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(w.access_token,{access_token:e})}))}},{key:"_makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"_leaveOpenTopic",value:function(e){var t=this.channels.find((function(t){return t.topic===e&&(t._isJoined()||t._isJoining())}));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}},{key:"_remove",value:function(e){this.channels=this.channels.filter((function(t){return t._joinRef()!==e._joinRef()}))}},{key:"_endPointURL",value:function(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}},{key:"_onConnMessage",value:function(e){var t=this;this.decode(e.data,(function(e){var r=e.topic,n=e.event,i=e.payload,s=e.ref;(s&&s===t.pendingHeartbeatRef||n===(null===i||void 0===i?void 0:i.type))&&(t.pendingHeartbeatRef=null),t.log("receive","".concat(i.status||""," ").concat(r," ").concat(n," ").concat(s&&"("+s+")"||""),i),t.channels.filter((function(e){return e._isMember(r)})).forEach((function(e){return e._trigger(n,i,s)})),t.stateChangeCallbacks.message.forEach((function(t){return t(e)}))}))}},{key:"_onConnOpen",value:function(){var e=this;this.log("transport","connected to ".concat(this._endPointURL())),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((function(){return e._sendHeartbeat()}),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((function(e){return e()}))}},{key:"_onConnClose",value:function(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((function(t){return t(e)}))}},{key:"_onConnError",value:function(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((function(t){return t(e)}))}},{key:"_triggerChanError",value:function(){this.channels.forEach((function(e){return e._trigger(w.error)}))}},{key:"_appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}},{key:"_flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((function(e){return e()})),this.sendBuffer=[])}},{key:"_sendHeartbeat",value:function(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}},{key:"_throttle",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.eventsPerSecondLimitMs;return function(){return!!t.inThrottle||(e(),t.inThrottle=!0,setTimeout((function(){t.inThrottle=!1}),r),!1)}}}]),e}(),fe=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).__isStorageError=!0,n.name="StorageError",n}return(0,s.Z)(r)}(m(Error));function de(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}var ve=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e,n){var s;return(0,i.Z)(this,r),(s=t.call(this,e)).name="StorageApiError",s.status=n,s}return(0,s.Z)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),r}(fe),pe=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e,n){var s;return(0,i.Z)(this,r),(s=t.call(this,e)).name="StorageUnknownError",s.originalError=n,s}return(0,s.Z)(r)}(fe),be=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},ye=function(e){var t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return be(void 0,void 0,void 0,(0,n.Z)().mark((function e(){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,4255,23));case 2:return e.next=4,(i=e.sent).fetch.apply(i,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))}:fetch),function(){return t.apply(void 0,arguments)}},me=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},ke=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},ge=function(e,t){return me(void 0,void 0,void 0,(0,n.Z)().mark((function i(){var s;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,be(void 0,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof Response){e.next=4;break}return e.next=3,Promise.resolve().then(r.t.bind(r,4255,23));case 3:return e.abrupt("return",e.sent.Response);case 4:return e.abrupt("return",Response);case 5:case"end":return e.stop()}}),e)})));case 2:s=i.sent,e instanceof s?e.json().then((function(r){t(new ve(ke(r),e.status||500))})):t(new pe(ke(e),e));case 4:case"end":return i.stop()}}),i)})))},we=function(e,t,r,n){var i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function xe(e,t,r,i,s,o){return me(this,void 0,void 0,(0,n.Z)().mark((function a(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,a){e(r,we(t,i,s,o)).then((function(e){if(!e.ok)throw e;return(null===i||void 0===i?void 0:i.noResolveJson)?e:e.json()})).then((function(e){return n(e)})).catch((function(e){return ge(e,a)}))})));case 1:case"end":return n.stop()}}),a)})))}function _e(e,t,r,i){return me(this,void 0,void 0,(0,n.Z)().mark((function s(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",xe(e,"GET",t,r,i));case 1:case"end":return n.stop()}}),s)})))}function Ee(e,t,r,i,s){return me(this,void 0,void 0,(0,n.Z)().mark((function o(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",xe(e,"POST",t,i,s,r));case 1:case"end":return n.stop()}}),o)})))}function Te(e,t,r,i,s){return me(this,void 0,void 0,(0,n.Z)().mark((function o(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",xe(e,"PUT",t,i,s,r));case 1:case"end":return n.stop()}}),o)})))}function Ze(e,t,r,i,s){return me(this,void 0,void 0,(0,n.Z)().mark((function o(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",xe(e,"DELETE",t,i,s,r));case 1:case"end":return n.stop()}}),o)})))}var Se=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},Oe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},je={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Pe=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;(0,i.Z)(this,e),this.url=t,this.headers=r,this.bucketId=n,this.fetch=ye(s)}return(0,s.Z)(e,[{key:"uploadOrUpdate",value:function(e,t,r,i){return Se(this,void 0,void 0,(0,n.Z)().mark((function s(){var o,a,c,u,h,l,f;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=Object.assign(Object.assign({},je),i),c=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)}),"undefined"!==typeof Blob&&r instanceof Blob?((o=new FormData).append("cacheControl",a.cacheControl),o.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(o=r).append("cacheControl",a.cacheControl):(o=r,c["cache-control"]="max-age=".concat(a.cacheControl),c["content-type"]=a.contentType),u=this._removeEmptyFolders(t),h=this._getFinalPath(u),n.next=8,this.fetch("".concat(this.url,"/object/").concat(h),{method:e,body:o,headers:c});case 8:if(!(l=n.sent).ok){n.next=13;break}return n.abrupt("return",{data:{path:u},error:null});case 13:return n.next=15,l.json();case 15:return f=n.sent,n.abrupt("return",{data:null,error:f});case 17:n.next=24;break;case 19:if(n.prev=19,n.t0=n.catch(0),!de(n.t0)){n.next=23;break}return n.abrupt("return",{data:null,error:n.t0});case 23:throw n.t0;case 24:case"end":return n.stop()}}),s,this,[[0,19]])})))}},{key:"upload",value:function(e,t,r){return Se(this,void 0,void 0,(0,n.Z)().mark((function i(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.uploadOrUpdate("POST",e,t,r));case 1:case"end":return n.stop()}}),i,this)})))}},{key:"update",value:function(e,t,r){return Se(this,void 0,void 0,(0,n.Z)().mark((function i(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.uploadOrUpdate("PUT",e,t,r));case 1:case"end":return n.stop()}}),i,this)})))}},{key:"move",value:function(e,t){return Se(this,void 0,void 0,(0,n.Z)().mark((function r(){var i;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ee(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers});case 3:return i=r.sent,r.abrupt("return",{data:i,error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!de(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"copy",value:function(e,t){return Se(this,void 0,void 0,(0,n.Z)().mark((function r(){var i;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ee(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers});case 3:return i=r.sent,r.abrupt("return",{data:{path:i.Key},error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!de(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"createSignedUrl",value:function(e,t,r){return Se(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o,a,c;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=this._getFinalPath(e),n.next=4,Ee(this.fetch,"".concat(this.url,"/object/sign/").concat(s),{expiresIn:t},{headers:this.headers});case 4:return o=n.sent,a=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"",c=encodeURI("".concat(this.url).concat(o.signedURL).concat(a)),o={signedUrl:c},n.abrupt("return",{data:o,error:null});case 11:if(n.prev=11,n.t0=n.catch(0),!de(n.t0)){n.next=15;break}return n.abrupt("return",{data:null,error:n.t0});case 15:throw n.t0;case 16:case"end":return n.stop()}}),i,this,[[0,11]])})))}},{key:"createSignedUrls",value:function(e,t,r){return Se(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o,a=this;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ee(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers});case 3:return s=n.sent,o=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"",n.abrupt("return",{data:s.map((function(e){return Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(a.url).concat(e.signedURL).concat(o)):null})})),error:null});case 8:if(n.prev=8,n.t0=n.catch(0),!de(n.t0)){n.next=12;break}return n.abrupt("return",{data:null,error:n.t0});case 12:throw n.t0;case 13:case"end":return n.stop()}}),i,this,[[0,8]])})))}},{key:"download",value:function(e){return Se(this,void 0,void 0,(0,n.Z)().mark((function t(){var r,i,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this._getFinalPath(e),t.next=4,_e(this.fetch,"".concat(this.url,"/object/").concat(r),{headers:this.headers,noResolveJson:!0});case 4:return i=t.sent,t.next=7,i.blob();case 7:return s=t.sent,t.abrupt("return",{data:s,error:null});case 11:if(t.prev=11,t.t0=t.catch(0),!de(t.t0)){t.next=15;break}return t.abrupt("return",{data:null,error:t.t0});case 15:throw t.t0;case 16:case"end":return t.stop()}}),t,this,[[0,11]])})))}},{key:"getPublicUrl",value:function(e,t){var r=this._getFinalPath(e),n=(null===t||void 0===t?void 0:t.download)?"?download=".concat(!0===t.download?"":t.download):"";return{data:{publicUrl:encodeURI("".concat(this.url,"/object/public/").concat(r).concat(n))}}}},{key:"remove",value:function(e){return Se(this,void 0,void 0,(0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ze(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!de(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"list",value:function(e,t,r){return Se(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=Object.assign(Object.assign(Object.assign({},Oe),t),{prefix:e||""}),n.next=4,Ee(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),s,{headers:this.headers},r);case 4:return o=n.sent,n.abrupt("return",{data:o,error:null});case 8:if(n.prev=8,n.t0=n.catch(0),!de(n.t0)){n.next=12;break}return n.abrupt("return",{data:null,error:n.t0});case 12:throw n.t0;case 13:case"end":return n.stop()}}),i,this,[[0,8]])})))}},{key:"_getFinalPath",value:function(e){return"".concat(this.bucketId,"/").concat(e)}},{key:"_removeEmptyFolders",value:function(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}]),e}(),Re={"X-Client-Info":"storage-js/".concat("2.0.0")},Ae=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},Ce=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;(0,i.Z)(this,e),this.url=t,this.headers=Object.assign(Object.assign({},Re),r),this.fetch=ye(n)}return(0,s.Z)(e,[{key:"listBuckets",value:function(){return Ae(this,void 0,void 0,(0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers});case 3:return t=e.sent,e.abrupt("return",{data:t,error:null});case 7:if(e.prev=7,e.t0=e.catch(0),!de(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getBucket",value:function(e){return Ae(this,void 0,void 0,(0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_e(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!de(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"createBucket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Ae(this,void 0,void 0,(0,n.Z)().mark((function r(){var i;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ee(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public},{headers:this.headers});case 3:return i=r.sent,r.abrupt("return",{data:i,error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!de(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"updateBucket",value:function(e,t){return Ae(this,void 0,void 0,(0,n.Z)().mark((function r(){var i;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Te(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public},{headers:this.headers});case 3:return i=r.sent,r.abrupt("return",{data:i,error:null});case 7:if(r.prev=7,r.t0=r.catch(0),!de(r.t0)){r.next=11;break}return r.abrupt("return",{data:null,error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}}),r,this,[[0,7]])})))}},{key:"emptyBucket",value:function(e){return Ae(this,void 0,void 0,(0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!de(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"deleteBucket",value:function(e){return Ae(this,void 0,void 0,(0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ze(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!de(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,7]])})))}}]),e}(),Ie=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return(0,i.Z)(this,r),t.call(this,e,n,s)}return(0,s.Z)(r,[{key:"from",value:function(e){return new Pe(this.url,this.headers,e,this.fetch)}}]),r}(Ce),Ue={"X-Client-Info":"supabase-js/".concat("2.1.0")},De=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},Le=function(e){var t;return t=e||("undefined"===typeof fetch?C():fetch),function(){return t.apply(void 0,arguments)}},Ne=function(e,t,r){var i=Le(r),s="undefined"===typeof Headers?A.Headers:Headers;return function(r,o){return De(void 0,void 0,void 0,(0,n.Z)().mark((function a(){var c,u,h;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:if(n.t1=c=n.sent,n.t0=null!==n.t1,!n.t0){n.next=6;break}n.t0=void 0!==c;case 6:if(!n.t0){n.next=10;break}n.t2=c,n.next=11;break;case 10:n.t2=e;case 11:return u=n.t2,(h=new s(null===o||void 0===o?void 0:o.headers)).has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization","Bearer ".concat(u)),n.abrupt("return",i(r,Object.assign(Object.assign({},o),{headers:h})));case 16:case"end":return n.stop()}}),a)})))}};var Be=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};var Fe=function(){return"undefined"!==typeof window};function Me(e,t){var r;t||(t=(null===(r=null===window||void 0===window?void 0:window.location)||void 0===r?void 0:r.href)||""),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}var Je=function(e){var t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Be(void 0,void 0,void 0,(0,n.Z)().mark((function e(){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,4255,23));case 2:return e.next=4,(i=e.sent).fetch.apply(i,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))}:fetch),function(){return t.apply(void 0,arguments)}},He=function(e,t){return Be(void 0,void 0,void 0,(0,n.Z)().mark((function r(){var i;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getItem(t);case 2:if(i=r.sent){r.next=5;break}return r.abrupt("return",null);case 5:return r.prev=5,r.abrupt("return",JSON.parse(i));case 9:return r.prev=9,r.t0=r.catch(5),r.abrupt("return",i);case 12:case"end":return r.stop()}}),r,null,[[5,9]])})))},Ge=function(e,t){return Be(void 0,void 0,void 0,(0,n.Z)().mark((function r(){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.removeItem(t);case 2:case"end":return r.stop()}}),r)})))},ze=(0,s.Z)((function e(){var t=this;(0,i.Z)(this,e),this.promise=new e.promiseConstructor((function(e,r){t.resolve=e,t.reject=r}))}));function qe(e){var t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");var r=t[1];return JSON.parse(function(e){try{return decodeURIComponent(atob(e.replace(/[-]/g,"+").replace(/[_]/g,"/")).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}catch(t){if(t instanceof ReferenceError)return Buffer.from(e,"base64").toString("utf-8");throw t}}(r))}ze.promiseConstructor=Promise;var Ke=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).__isAuthError=!0,n.name="AuthError",n}return(0,s.Z)(r)}(m(Error));function Ve(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}var We=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e,n){var s;return(0,i.Z)(this,r),(s=t.call(this,e)).name="AuthApiError",s.status=n,s}return(0,s.Z)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),r}(Ke),Xe=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e,n){var s;return(0,i.Z)(this,r),(s=t.call(this,e)).name="AuthUnknownError",s.originalError=n,s}return(0,s.Z)(r)}(Ke),Ye=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e,n,s){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).name=n,o.status=s,o}return(0,s.Z)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),r}(Ke),$e=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(){return(0,i.Z)(this,r),t.call(this,"Auth session missing!","AuthSessionMissingError",400)}return(0,s.Z)(r)}(Ye),Qe=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){return(0,i.Z)(this,r),t.call(this,e,"AuthInvalidCredentialsError",400)}return(0,s.Z)(r)}(Ye),et=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,i.Z)(this,r),(n=t.call(this,e,"AuthImplicitGrantRedirectError",500)).details=null,n.details=s,n}return(0,s.Z)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}]),r}(Ye),tt=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e,n){return(0,i.Z)(this,r),t.call(this,e,"AuthRetryableFetchError",n)}return(0,s.Z)(r)}(Ye),rt=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},nt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},it=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},st=function(e,t){return rt(void 0,void 0,void 0,(0,n.Z)().mark((function r(){var i;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=[502,503,504],"object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json?i.includes(e.status)?t(new tt(it(e),e.status)):e.json().then((function(r){t(new We(it(r),e.status||500))})).catch((function(e){t(new Xe(it(e),e))})):t(new tt(it(e),0));case 2:case"end":return r.stop()}var n}),r)})))},ot=function(e,t,r,n){var i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function at(e,t,r,i){var s,o;return rt(this,void 0,void 0,(0,n.Z)().mark((function a(){var c,u,h,l;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=null!==(s=null===i||void 0===i?void 0:i.headers)&&void 0!==s?s:{},(null===i||void 0===i?void 0:i.jwt)&&(c.Authorization="Bearer ".concat(i.jwt)),u=null!==(o=null===i||void 0===i?void 0:i.query)&&void 0!==o?o:{},(null===i||void 0===i?void 0:i.redirectTo)&&(u.redirect_to=i.redirectTo),h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",n.next=7,ct(e,t,r+h,{headers:c,noResolveJson:null===i||void 0===i?void 0:i.noResolveJson},{},null===i||void 0===i?void 0:i.body);case 7:return l=n.sent,n.abrupt("return",(null===i||void 0===i?void 0:i.xform)?null===i||void 0===i?void 0:i.xform(l):{data:Object.assign({},l),error:null});case 9:case"end":return n.stop()}}),a)})))}function ct(e,t,r,i,s,o){return rt(this,void 0,void 0,(0,n.Z)().mark((function a(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,a){e(r,ot(t,i,s,o)).then((function(e){if(!e.ok)throw e;return(null===i||void 0===i?void 0:i.noResolveJson)?e:e.json()})).then((function(e){return n(e)})).catch((function(e){return st(e,a)}))})));case 1:case"end":return n.stop()}}),a)})))}function ut(e){var t,r,n=null;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&((n=Object.assign({},e)).expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)),{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ht(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function lt(e){return{data:e,error:null}}function ft(e){var t=e.action_link,r=e.email_otp,n=e.hashed_token,i=e.redirect_to,s=e.verification_type,o=nt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},user:Object.assign({},o)},error:null}}var dt=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},vt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},pt=function(){function e(t){var r=t.url,n=void 0===r?"":r,s=t.headers,o=void 0===s?{}:s,a=t.fetch;(0,i.Z)(this,e),this.url=n,this.headers=o,this.fetch=Je(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}return(0,s.Z)(e,[{key:"signOut",value:function(e){return dt(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at(this.fetch,"POST","".concat(this.url,"/logout"),{headers:this.headers,jwt:e,noResolveJson:!0});case 3:return t.abrupt("return",{data:null,error:null});case 6:if(t.prev=6,t.t0=t.catch(0),!Ve(t.t0)){t.next=10;break}return t.abrupt("return",{data:null,error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"inviteUserByEmail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dt(this,void 0,void 0,(0,n.Z)().mark((function r(){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,at(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ht});case 3:return r.abrupt("return",r.sent);case 6:if(r.prev=6,r.t0=r.catch(0),!Ve(r.t0)){r.next=10;break}return r.abrupt("return",{data:{user:null},error:r.t0});case 10:throw r.t0;case 11:case"end":return r.stop()}}),r,this,[[0,6]])})))}},{key:"generateLink",value:function(e){return dt(this,void 0,void 0,(0,n.Z)().mark((function t(){var r,i,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.options,i=vt(e,["options"]),s=Object.assign(Object.assign({},i),r),"newEmail"in i&&(s.new_email=null===i||void 0===i?void 0:i.newEmail,delete s.newEmail),t.next=6,at(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:s,headers:this.headers,xform:ft,redirectTo:null===r||void 0===r?void 0:r.redirectTo});case 6:return t.abrupt("return",t.sent);case 9:if(t.prev=9,t.t0=t.catch(0),!Ve(t.t0)){t.next=13;break}return t.abrupt("return",{data:{properties:null,user:null},error:t.t0});case 13:throw t.t0;case 14:case"end":return t.stop()}}),t,this,[[0,9]])})))}},{key:"createUser",value:function(e){return dt(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:ht});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!Ve(t.t0)){t.next=10;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"listUsers",value:function(){return dt(this,void 0,void 0,(0,n.Z)().mark((function e(){var t,r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers});case 3:if(t=e.sent,r=t.data,!(i=t.error)){e.next=8;break}throw i;case 8:return e.abrupt("return",{data:Object.assign({},r),error:null});case 11:if(e.prev=11,e.t0=e.catch(0),!Ve(e.t0)){e.next=15;break}return e.abrupt("return",{data:{users:[]},error:e.t0});case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,this,[[0,11]])})))}},{key:"getUserById",value:function(e){return dt(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:ht});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!Ve(t.t0)){t.next=10;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"updateUserById",value:function(e,t){return dt(this,void 0,void 0,(0,n.Z)().mark((function r(){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,at(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:ht});case 3:return r.abrupt("return",r.sent);case 6:if(r.prev=6,r.t0=r.catch(0),!Ve(r.t0)){r.next=10;break}return r.abrupt("return",{data:{user:null},error:r.t0});case 10:throw r.t0;case 11:case"end":return r.stop()}}),r,this,[[0,6]])})))}},{key:"deleteUser",value:function(e){return dt(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:ht});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!Ve(t.t0)){t.next=10;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"_listFactors",value:function(e){return dt(this,void 0,void 0,(0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!Ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"_deleteFactor",value:function(e){return dt(this,void 0,void 0,(0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers});case 3:return r=t.sent,t.abrupt("return",{data:r,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!Ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,7]])})))}}]),e}(),bt={"X-Client-Info":"gotrue-js/".concat("2.3.0")},yt=10,mt=2,kt={getItem:function(e){return Fe()?globalThis.localStorage.getItem(e):null},setItem:function(e,t){Fe()&&globalThis.localStorage.setItem(e,t)},removeItem:function(e){Fe()&&globalThis.localStorage.removeItem(e)}};var gt=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();var wt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bt},xt=function(){function e(t){(0,i.Z)(this,e),this.stateChangeEmitters=new Map,this.networkRetries=0,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0;var r=Object.assign(Object.assign({},wt),t);this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||kt,this.admin=new pt({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Je(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.initialize(),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)}}return(0,s.Z)(e,[{key:"initialize",value:function(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}},{key:"_initialize",value:function(){return gt(this,void 0,void 0,(0,n.Z)().mark((function e(){var t,r,i,s,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initializePromise){e.next=2;break}return e.abrupt("return",this.initializePromise);case 2:if(e.prev=2,!this.detectSessionInUrl||!this._isImplicitGrantFlow()){e.next=19;break}return e.next=6,this._getSessionFromUrl();case 6:if(t=e.sent,r=t.data,!(i=t.error)){e.next=13;break}return e.next=12,this._removeSession();case 12:return e.abrupt("return",{error:i});case 13:return s=r.session,o=r.redirectType,e.next=16,this._saveSession(s);case 16:return this._notifyAllSubscribers("SIGNED_IN",s),"recovery"===o&&this._notifyAllSubscribers("PASSWORD_RECOVERY",s),e.abrupt("return",{error:null});case 19:return e.next=21,this._recoverAndRefresh();case 21:return e.abrupt("return",{error:null});case 24:if(e.prev=24,e.t0=e.catch(2),!Ve(e.t0)){e.next=28;break}return e.abrupt("return",{error:e.t0});case 28:return e.abrupt("return",{error:new Xe("Unexpected error during initialization",e.t0)});case 29:return e.prev=29,this._handleVisibilityChange(),e.finish(29);case 32:case"end":return e.stop()}}),e,this,[[2,24,29,32]])})))}},{key:"signUp",value:function(e){var t,r;return gt(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o,a,c,u,h,l,f,d,v,p,b;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this._removeSession();case 3:if(!("email"in e)){n.next=10;break}return o=e.email,a=e.password,c=e.options,n.next=7,at(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===c||void 0===c?void 0:c.emailRedirectTo,body:{email:o,password:a,data:null!==(t=null===c||void 0===c?void 0:c.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===c||void 0===c?void 0:c.captchaToken}},xform:ut});case 7:s=n.sent,n.next=18;break;case 10:if(!("phone"in e)){n.next=17;break}return u=e.phone,h=e.password,l=e.options,n.next=14,at(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:u,password:h,data:null!==(r=null===l||void 0===l?void 0:l.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===l||void 0===l?void 0:l.captchaToken}},xform:ut});case 14:s=n.sent,n.next=18;break;case 17:throw new Qe("You must provide either an email or phone number and a password");case 18:if(d=(f=s).data,!(v=f.error)&&d){n.next=21;break}return n.abrupt("return",{data:{user:null,session:null},error:v});case 21:if(p=d.session,b=d.user,!d.session){n.next=27;break}return n.next=26,this._saveSession(d.session);case 26:this._notifyAllSubscribers("SIGNED_IN",p);case 27:return n.abrupt("return",{data:{user:b,session:p},error:null});case 30:if(n.prev=30,n.t0=n.catch(0),!Ve(n.t0)){n.next=34;break}return n.abrupt("return",{data:{user:null,session:null},error:n.t0});case 34:throw n.t0;case 35:case"end":return n.stop()}}),i,this,[[0,30]])})))}},{key:"signInWithPassword",value:function(e){var t,r;return gt(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o,a,c,u,h,l,f,d,v;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this._removeSession();case 3:if(!("email"in e)){n.next=10;break}return o=e.email,a=e.password,c=e.options,n.next=7,at(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:o,password:a,data:null!==(t=null===c||void 0===c?void 0:c.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===c||void 0===c?void 0:c.captchaToken}},xform:ut});case 7:s=n.sent,n.next=18;break;case 10:if(!("phone"in e)){n.next=17;break}return u=e.phone,h=e.password,l=e.options,n.next=14,at(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:u,password:h,data:null!==(r=null===l||void 0===l?void 0:l.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===l||void 0===l?void 0:l.captchaToken}},xform:ut});case 14:s=n.sent,n.next=18;break;case 17:throw new Qe("You must provide either an email or phone number and a password");case 18:if(d=(f=s).data,!(v=f.error)&&d){n.next=21;break}return n.abrupt("return",{data:{user:null,session:null},error:v});case 21:if(!d.session){n.next=25;break}return n.next=24,this._saveSession(d.session);case 24:this._notifyAllSubscribers("SIGNED_IN",d.session);case 25:return n.abrupt("return",{data:d,error:v});case 28:if(n.prev=28,n.t0=n.catch(0),!Ve(n.t0)){n.next=32;break}return n.abrupt("return",{data:{user:null,session:null},error:n.t0});case 32:throw n.t0;case 33:case"end":return n.stop()}}),i,this,[[0,28]])})))}},{key:"signInWithOAuth",value:function(e){var t,r,i;return gt(this,void 0,void 0,(0,n.Z)().mark((function s(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._removeSession();case 2:return n.abrupt("return",this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams}));case 3:case"end":return n.stop()}}),s,this)})))}},{key:"signInWithOtp",value:function(e){var t,r,i,s;return gt(this,void 0,void 0,(0,n.Z)().mark((function o(){var a,c,u,h,l,f,d,v;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this._removeSession();case 3:if(!("email"in e)){n.next=10;break}return a=e.email,c=e.options,n.next=7,at(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:a,data:null!==(t=null===c||void 0===c?void 0:c.data)&&void 0!==t?t:{},create_user:null===(r=null===c||void 0===c?void 0:c.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===c||void 0===c?void 0:c.captchaToken}},redirectTo:null===c||void 0===c?void 0:c.emailRedirectTo});case 7:return u=n.sent,h=u.error,n.abrupt("return",{data:{user:null,session:null},error:h});case 10:if(!("phone"in e)){n.next=17;break}return l=e.phone,f=e.options,n.next=14,at(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:l,data:null!==(i=null===f||void 0===f?void 0:f.data)&&void 0!==i?i:{},create_user:null===(s=null===f||void 0===f?void 0:f.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null===f||void 0===f?void 0:f.captchaToken}}});case 14:return d=n.sent,v=d.error,n.abrupt("return",{data:{user:null,session:null},error:v});case 17:throw new Qe("You must provide either an email or phone number.");case 20:if(n.prev=20,n.t0=n.catch(0),!Ve(n.t0)){n.next=24;break}return n.abrupt("return",{data:{user:null,session:null},error:n.t0});case 24:throw n.t0;case 25:case"end":return n.stop()}}),o,this,[[0,20]])})))}},{key:"verifyOtp",value:function(e){var t,r;return gt(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o,a,c,u;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this._removeSession();case 3:return n.next=5,at(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:null===(t=e.options)||void 0===t?void 0:t.captchaToken}}),redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,xform:ut});case 5:if(s=n.sent,o=s.data,!(a=s.error)){n.next=10;break}throw a;case 10:if(o){n.next=12;break}throw"An error occurred on token verification.";case 12:if(c=o.session,u=o.user,!(null===c||void 0===c?void 0:c.access_token)){n.next=18;break}return n.next=17,this._saveSession(c);case 17:this._notifyAllSubscribers("SIGNED_IN",c);case 18:return n.abrupt("return",{data:{user:u,session:c},error:null});case 21:if(n.prev=21,n.t0=n.catch(0),!Ve(n.t0)){n.next=25;break}return n.abrupt("return",{data:{user:null,session:null},error:n.t0});case 25:throw n.t0;case 26:case"end":return n.stop()}}),i,this,[[0,21]])})))}},{key:"signInWithSSO",value:function(e){var t,r,i;return gt(this,void 0,void 0,(0,n.Z)().mark((function s(){return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this._removeSession();case 3:return n.next=5,at(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(i=null===e||void 0===e?void 0:e.options)||void 0===i?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:lt});case 5:return n.abrupt("return",n.sent);case 8:if(n.prev=8,n.t0=n.catch(0),!Ve(n.t0)){n.next=12;break}return n.abrupt("return",{data:null,error:n.t0});case 12:throw n.t0;case 13:case"end":return n.stop()}}),s,this,[[0,8]])})))}},{key:"getSession",value:function(){return gt(this,void 0,void 0,(0,n.Z)().mark((function e(){var t,r,i,s,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializePromise;case 2:if(t=null,!this.persistSession){e.next=16;break}return e.next=6,He(this.storage,this.storageKey);case 6:if(null===(r=e.sent)){e.next=14;break}if(!this._isValidSession(r)){e.next=12;break}t=r,e.next=14;break;case 12:return e.next=14,this._removeSession();case 14:e.next=17;break;case 16:t=this.inMemorySession;case 17:if(t){e.next=19;break}return e.abrupt("return",{data:{session:null},error:null});case 19:if(!!t.expires_at&&t.expires_at<=Date.now()/1e3){e.next=22;break}return e.abrupt("return",{data:{session:t},error:null});case 22:return e.next=24,this._callRefreshToken(t.refresh_token);case 24:if(i=e.sent,s=i.session,!(o=i.error)){e.next=29;break}return e.abrupt("return",{data:{session:null},error:o});case 29:return e.abrupt("return",{data:{session:s},error:null});case 30:case"end":return e.stop()}}),e,this)})))}},{key:"getUser",value:function(e){var t,r;return gt(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o,a;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=10;break}return n.next=4,this.getSession();case 4:if(s=n.sent,o=s.data,!(a=s.error)){n.next=9;break}throw a;case 9:e=null!==(r=null===(t=o.session)||void 0===t?void 0:t.access_token)&&void 0!==r?r:void 0;case 10:return n.next=12,at(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:ht});case 12:return n.abrupt("return",n.sent);case 15:if(n.prev=15,n.t0=n.catch(0),!Ve(n.t0)){n.next=19;break}return n.abrupt("return",{data:{user:null},error:n.t0});case 19:throw n.t0;case 20:case"end":return n.stop()}}),i,this,[[0,15]])})))}},{key:"updateUser",value:function(e){return gt(this,void 0,void 0,(0,n.Z)().mark((function t(){var r,i,s,o,a,c,u;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSession();case 3:if(r=t.sent,i=r.data,!(s=r.error)){t.next=8;break}throw s;case 8:if(i.session){t.next=10;break}throw new $e;case 10:return o=i.session,t.next=13,at(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,body:e,jwt:o.access_token,xform:ht});case 13:if(a=t.sent,c=a.data,!(u=a.error)){t.next=18;break}throw u;case 18:return o.user=c.user,t.next=21,this._saveSession(o);case 21:return this._notifyAllSubscribers("USER_UPDATED",o),t.abrupt("return",{data:{user:o.user},error:null});case 25:if(t.prev=25,t.t0=t.catch(0),!Ve(t.t0)){t.next=29;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 29:throw t.t0;case 30:case"end":return t.stop()}}),t,this,[[0,25]])})))}},{key:"_decodeJWT",value:function(e){return qe(e)}},{key:"setSession",value:function(e){return gt(this,void 0,void 0,(0,n.Z)().mark((function t(){var r,i,s,o,a,c,u,h,l,f,d;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=Date.now()/1e3,i=r,s=!0,o=null,e.access_token&&e.access_token.split(".")[1]&&(a=this._decodeJWT(e.access_token)).exp&&(i=a.exp,s=i<=r),!s){t.next=21;break}if(e.refresh_token){t.next=9;break}throw new $e;case 9:return t.next=11,this._refreshAccessToken(e.refresh_token);case 11:if(c=t.sent,u=c.data,!(h=c.error)){t.next=16;break}return t.abrupt("return",{data:{session:null,user:null},error:h});case 16:if(u.session){t.next=18;break}return t.abrupt("return",{data:{session:null,user:null},error:null});case 18:o=u.session,t.next=29;break;case 21:return t.next=23,this.getUser(e.access_token);case 23:if(l=t.sent,f=l.data,!(d=l.error)){t.next=28;break}throw d;case 28:o={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-r,expires_at:i};case 29:return t.next=31,this._saveSession(o);case 31:return this._notifyAllSubscribers("TOKEN_REFRESHED",o),t.abrupt("return",{data:{session:o,user:o.user},error:null});case 35:if(t.prev=35,t.t0=t.catch(0),!Ve(t.t0)){t.next=39;break}return t.abrupt("return",{data:{session:null,user:null},error:t.t0});case 39:throw t.t0;case 40:case"end":return t.stop()}}),t,this,[[0,35]])})))}},{key:"refreshSession",value:function(e){var t;return gt(this,void 0,void 0,(0,n.Z)().mark((function r(){var i,s,o,a,c,u;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,e){r.next=10;break}return r.next=4,this.getSession();case 4:if(i=r.sent,s=i.data,!(o=i.error)){r.next=9;break}throw o;case 9:e=null!==(t=s.session)&&void 0!==t?t:void 0;case 10:if(null===e||void 0===e?void 0:e.refresh_token){r.next=12;break}throw new $e;case 12:return r.next=14,this._callRefreshToken(e.refresh_token);case 14:if(a=r.sent,c=a.session,!(u=a.error)){r.next=19;break}return r.abrupt("return",{data:{user:null,session:null},error:u});case 19:if(c){r.next=21;break}return r.abrupt("return",{data:{user:null,session:null},error:null});case 21:return r.abrupt("return",{data:{user:c.user,session:c},error:null});case 24:if(r.prev=24,r.t0=r.catch(0),!Ve(r.t0)){r.next=28;break}return r.abrupt("return",{data:{user:null,session:null},error:r.t0});case 28:throw r.t0;case 29:case"end":return r.stop()}}),r,this,[[0,24]])})))}},{key:"_getSessionFromUrl",value:function(){return gt(this,void 0,void 0,(0,n.Z)().mark((function e(){var t,r,i,s,o,a,c,u,h,l,f,d,v,p,b,y,m;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Fe()){e.next=3;break}throw new et("No browser detected.");case 3:if(this._isImplicitGrantFlow()){e.next=5;break}throw new et("Not a valid implicit grant flow url.");case 5:if(!(t=Me("error_description"))){e.next=14;break}if(r=Me("error_code")){e.next=10;break}throw new et("No error_code detected.");case 10:if(i=Me("error")){e.next=13;break}throw new et("No error detected.");case 13:throw new et(t,{error:i,code:r});case 14:if(s=Me("provider_token"),o=Me("provider_refresh_token"),a=Me("access_token")){e.next=19;break}throw new et("No access_token detected.");case 19:if(c=Me("expires_in")){e.next=22;break}throw new et("No expires_in detected.");case 22:if(u=Me("refresh_token")){e.next=25;break}throw new et("No refresh_token detected.");case 25:if(h=Me("token_type")){e.next=28;break}throw new et("No token_type detected.");case 28:return l=Math.round(Date.now()/1e3),f=l+parseInt(c),e.next=32,this.getUser(a);case 32:if(d=e.sent,v=d.data,!(p=d.error)){e.next=37;break}throw p;case 37:return b=v.user,y={provider_token:s,provider_refresh_token:o,access_token:a,expires_in:parseInt(c),expires_at:f,refresh_token:u,token_type:h,user:b},m=Me("type"),window.location.hash="",e.abrupt("return",{data:{session:y,redirectType:m},error:null});case 44:if(e.prev=44,e.t0=e.catch(0),!Ve(e.t0)){e.next=48;break}return e.abrupt("return",{data:{session:null,redirectType:null},error:e.t0});case 48:throw e.t0;case 49:case"end":return e.stop()}}),e,this,[[0,44]])})))}},{key:"_isImplicitGrantFlow",value:function(){return Fe()&&(Boolean(Me("access_token"))||Boolean(Me("error_description")))}},{key:"signOut",value:function(){var e;return gt(this,void 0,void 0,(0,n.Z)().mark((function t(){var r,i,s,o,a,c;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSession();case 2:if(r=t.sent,i=r.data,!(s=r.error)){t.next=7;break}return t.abrupt("return",{error:s});case 7:if(!(o=null===(e=i.session)||void 0===e?void 0:e.access_token)){t.next=15;break}return t.next=11,this.admin.signOut(o);case 11:if(a=t.sent,!(c=a.error)){t.next=15;break}return t.abrupt("return",{error:c});case 15:return t.next=17,this._removeSession();case 17:return this._notifyAllSubscribers("SIGNED_OUT",null),t.abrupt("return",{error:null});case 19:case"end":return t.stop()}}),t,this)})))}},{key:"onAuthStateChange",value:function(e){var t=this,r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:r,callback:e,unsubscribe:function(){t.stateChangeEmitters.delete(r)}};return this.stateChangeEmitters.set(r,n),{data:{subscription:n}}}},{key:"resetPasswordForEmail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gt(this,void 0,void 0,(0,n.Z)().mark((function r(){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,at(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo});case 3:return r.abrupt("return",r.sent);case 6:if(r.prev=6,r.t0=r.catch(0),!Ve(r.t0)){r.next=10;break}return r.abrupt("return",{data:null,error:r.t0});case 10:throw r.t0;case 11:case"end":return r.stop()}}),r,this,[[0,6]])})))}},{key:"_refreshAccessToken",value:function(e){return gt(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:ut});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!Ve(t.t0)){t.next=10;break}return t.abrupt("return",{data:{session:null,user:null},error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"_isValidSession",value:function(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}},{key:"_handleProviderSignIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return Fe()&&(window.location.href=r),{data:{provider:e,url:r},error:null}}},{key:"_recoverAndRefresh",value:function(){var e;return gt(this,void 0,void 0,(0,n.Z)().mark((function t(){var r,i,s,o,a=this;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,He(this.storage,this.storageKey);case 3:if(r=t.sent,this._isValidSession(r)){t.next=9;break}if(null===r){t.next=8;break}return t.next=8,this._removeSession();case 8:return t.abrupt("return");case 9:if(i=Math.round(Date.now()/1e3),!((null!==(e=r.expires_at)&&void 0!==e?e:1/0)<i+10)){t.next=32;break}if(!this.autoRefreshToken||!r.refresh_token){t.next=28;break}return this.networkRetries++,t.next=15,this._callRefreshToken(r.refresh_token);case 15:if(s=t.sent,!(o=s.error)){t.next=25;break}if(console.log(o.message),!(o instanceof tt&&this.networkRetries<yt)){t.next=23;break}return this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout((function(){return a._recoverAndRefresh()}),100*Math.pow(mt,this.networkRetries)),t.abrupt("return");case 23:return t.next=25,this._removeSession();case 25:this.networkRetries=0,t.next=30;break;case 28:return t.next=30,this._removeSession();case 30:t.next=36;break;case 32:if(!this.persistSession){t.next=35;break}return t.next=35,this._saveSession(r);case 35:this._notifyAllSubscribers("SIGNED_IN",r);case 36:t.next=42;break;case 38:return t.prev=38,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return");case 42:case"end":return t.stop()}}),t,this,[[0,38]])})))}},{key:"_callRefreshToken",value:function(e){var t,r;return gt(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o,a,c,u;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.refreshingDeferred){n.next=2;break}return n.abrupt("return",this.refreshingDeferred.promise);case 2:if(n.prev=2,this.refreshingDeferred=new ze,e){n.next=6;break}throw new $e;case 6:return n.next=8,this._refreshAccessToken(e);case 8:if(s=n.sent,o=s.data,!(a=s.error)){n.next=13;break}throw a;case 13:if(o.session){n.next=15;break}throw new $e;case 15:return n.next=17,this._saveSession(o.session);case 17:return this._notifyAllSubscribers("TOKEN_REFRESHED",o.session),c={session:o.session,error:null},this.refreshingDeferred.resolve(c),n.abrupt("return",c);case 23:if(n.prev=23,n.t0=n.catch(2),!Ve(n.t0)){n.next=29;break}return u={session:null,error:n.t0},null===(t=this.refreshingDeferred)||void 0===t||t.resolve(u),n.abrupt("return",u);case 29:throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(n.t0),n.t0;case 31:return n.prev=31,this.refreshingDeferred=null,n.finish(31);case 34:case"end":return n.stop()}}),i,this,[[2,23,31,34]])})))}},{key:"_notifyAllSubscribers",value:function(e,t){this.stateChangeEmitters.forEach((function(r){return r.callback(e,t)}))}},{key:"_saveSession",value:function(e){return gt(this,void 0,void 0,(0,n.Z)().mark((function t(){var r,i,s,o;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.persistSession||(this.inMemorySession=e),(r=e.expires_at)&&(i=Math.round(Date.now()/1e3),o=(s=r-i)>10?10:.5,this._startAutoRefreshToken(1e3*(s-o))),!this.persistSession||!e.expires_at){t.next=6;break}return t.next=6,this._persistSession(e);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"_persistSession",value:function(e){return t=this.storage,r=this.storageKey,i=e,Be(void 0,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setItem(r,JSON.stringify(i));case 2:case"end":return e.stop()}}),e)})));var t,r,i}},{key:"_removeSession",value:function(){return gt(this,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.persistSession){e.next=5;break}return e.next=3,Ge(this.storage,this.storageKey);case 3:e.next=6;break;case 5:this.inMemorySession=null;case 6:this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"_startAutoRefreshToken",value:function(e){var t=this;this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),e<=0||!this.autoRefreshToken||(this.refreshTokenTimer=setTimeout((function(){return gt(t,void 0,void 0,(0,n.Z)().mark((function e(){var t,r,i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.networkRetries++,e.next=3,this.getSession();case 3:if(t=e.sent,r=t.data.session,t.error||!r){e.next=13;break}return e.next=9,this._callRefreshToken(r.refresh_token);case 9:i=e.sent,(s=i.error)||(this.networkRetries=0),s instanceof tt&&this.networkRetries<yt&&this._startAutoRefreshToken(100*Math.pow(mt,this.networkRetries));case 13:case"end":return e.stop()}}),e,this)})))}),e),"function"===typeof this.refreshTokenTimer.unref&&this.refreshTokenTimer.unref())}},{key:"_handleVisibilityChange",value:function(){var e=this;if(!Fe()||!(null===window||void 0===window?void 0:window.addEventListener))return!1;try{null===window||void 0===window||window.addEventListener("visibilitychange",(function(){return gt(e,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState){e.next=5;break}return e.next=3,this.initializePromise;case 3:return e.next=5,this._recoverAndRefresh();case 5:case"end":return e.stop()}}),e,this)})))}))}catch(t){console.error("_handleVisibilityChange",t)}}},{key:"_getUrlForProvider",value:function(e,t){var r=["provider=".concat(encodeURIComponent(e))];if((null===t||void 0===t?void 0:t.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(t.redirectTo))),(null===t||void 0===t?void 0:t.scopes)&&r.push("scopes=".concat(encodeURIComponent(t.scopes))),null===t||void 0===t?void 0:t.queryParams){var n=new URLSearchParams(t.queryParams);r.push(n.toString())}return"".concat(this.url,"/authorize?").concat(r.join("&"))}},{key:"_unenroll",value:function(e){var t;return gt(this,void 0,void 0,(0,n.Z)().mark((function r(){var i,s,o;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getSession();case 2:if(i=r.sent,s=i.data,!(o=i.error)){r.next=7;break}return r.abrupt("return",{data:null,error:o});case 7:return r.next=9,at(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(t=null===s||void 0===s?void 0:s.session)||void 0===t?void 0:t.access_token});case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"_enroll",value:function(e){var t,r;return gt(this,void 0,void 0,(0,n.Z)().mark((function i(){var s,o,a,c,u,h;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getSession();case 2:if(s=n.sent,o=s.data,!(a=s.error)){n.next=7;break}return n.abrupt("return",{data:null,error:a});case 7:return n.next=9,at(this.fetch,"POST","".concat(this.url,"/factors"),{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(t=null===o||void 0===o?void 0:o.session)||void 0===t?void 0:t.access_token});case 9:if(c=n.sent,u=c.data,!(h=c.error)){n.next=14;break}return n.abrupt("return",{data:null,error:h});case 14:return(null===(r=null===u||void 0===u?void 0:u.totp)||void 0===r?void 0:r.qr_code)&&(u.totp.qr_code="data:image/svg+xml;utf-8,".concat(u.totp.qr_code)),n.abrupt("return",{data:u,error:null});case 16:case"end":return n.stop()}}),i,this)})))}},{key:"_verify",value:function(e){var t;return gt(this,void 0,void 0,(0,n.Z)().mark((function r(){var i,s,o,a,c,u;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getSession();case 2:if(i=r.sent,s=i.data,!(o=i.error)){r.next=7;break}return r.abrupt("return",{data:null,error:o});case 7:return r.next=9,at(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(t=null===s||void 0===s?void 0:s.session)||void 0===t?void 0:t.access_token});case 9:if(a=r.sent,c=a.data,!(u=a.error)){r.next=14;break}return r.abrupt("return",{data:null,error:u});case 14:return r.next=16,this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c));case 16:return this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),r.abrupt("return",{data:c,error:u});case 18:case"end":return r.stop()}}),r,this)})))}},{key:"_challenge",value:function(e){var t;return gt(this,void 0,void 0,(0,n.Z)().mark((function r(){var i,s,o;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getSession();case 2:if(i=r.sent,s=i.data,!(o=i.error)){r.next=7;break}return r.abrupt("return",{data:null,error:o});case 7:return r.next=9,at(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{headers:this.headers,jwt:null===(t=null===s||void 0===s?void 0:s.session)||void 0===t?void 0:t.access_token});case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"_challengeAndVerify",value:function(e){return gt(this,void 0,void 0,(0,n.Z)().mark((function t(){var r,i,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._challenge({factorId:e.factorId});case 2:if(r=t.sent,i=r.data,!(s=r.error)){t.next=7;break}return t.abrupt("return",{data:null,error:s});case 7:return t.next=9,this._verify({factorId:e.factorId,challengeId:i.id,code:e.code});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"_listFactors",value:function(){return gt(this,void 0,void 0,(0,n.Z)().mark((function e(){var t,r,i,s,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:if(t=e.sent,r=t.data.user,!(i=t.error)){e.next=7;break}return e.abrupt("return",{data:null,error:i});case 7:return s=(null===r||void 0===r?void 0:r.factors)||[],o=s.filter((function(e){return"totp"===e.factor_type&&"verified"===e.status})),e.abrupt("return",{data:{all:s,totp:o},error:null});case 10:case"end":return e.stop()}}),e,this)})))}},{key:"_getAuthenticatorAssuranceLevel",value:function(){var e,t;return gt(this,void 0,void 0,(0,n.Z)().mark((function r(){var i,s,o,a,c,u,h;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getSession();case 2:if(i=r.sent,s=i.data.session,!(o=i.error)){r.next=7;break}return r.abrupt("return",{data:null,error:o});case 7:if(s){r.next=9;break}return r.abrupt("return",{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null});case 9:return a=this._decodeJWT(s.access_token),c=null,a.aal&&(c=a.aal),u=c,(null!==(t=null===(e=s.user.factors)||void 0===e?void 0:e.filter((function(e){return"verified"===e.status})))&&void 0!==t?t:[]).length>0&&(u="aal2"),h=a.amr||[],r.abrupt("return",{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:h},error:null});case 17:case"end":return r.stop()}}),r,this)})))}}]),e}(),_t=function(e){(0,u.Z)(r,e);var t=(0,h.Z)(r);function r(e){return(0,i.Z)(this,r),t.call(this,e)}return(0,s.Z)(r)}(xt),Et=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},Tt={headers:Ue},Zt={schema:"public"},St={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},Ot={},jt=function(){function e(t,r,n){var s,o,a,c,u,h,l,f;if((0,i.Z)(this,e),this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");var d=t.replace(/\/$/,"");if(this.realtimeUrl="".concat(d,"/realtime/v1").replace(/^http/i,"ws"),this.authUrl="".concat(d,"/auth/v1"),this.storageUrl="".concat(d,"/storage/v1"),d.match(/(supabase\.co)|(supabase\.in)/)){var v=d.split(".");this.functionsUrl="".concat(v[0],".functions.").concat(v[1],".").concat(v[2])}else this.functionsUrl="".concat(d,"/functions/v1");var p="sb-".concat(new URL(this.authUrl).hostname.split(".")[0],"-auth-token"),b=function(e,t){var r=e.db,n=e.auth,i=e.realtime,s=e.global,o=t.db,a=t.auth,c=t.realtime,u=t.global;return{db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},u),s)}}(null!==n&&void 0!==n?n:{},{db:Zt,realtime:Ot,auth:Object.assign(Object.assign({},St),{storageKey:p}),global:Tt});this.storageKey=null!==(o=null===(s=b.auth)||void 0===s?void 0:s.storageKey)&&void 0!==o?o:"",this.headers=null!==(c=null===(a=b.global)||void 0===a?void 0:a.headers)&&void 0!==c?c:{},this.auth=this._initSupabaseAuthClient(null!==(u=b.auth)&&void 0!==u?u:{},this.headers,null===(h=b.global)||void 0===h?void 0:h.fetch),this.fetch=Ne(r,this._getAccessToken.bind(this),null===(l=b.global)||void 0===l?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},b.realtime)),this.rest=new B("".concat(d,"/rest/v1"),{headers:this.headers,schema:null===(f=b.db)||void 0===f?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}return(0,s.Z)(e,[{key:"functions",get:function(){return new j(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}},{key:"storage",get:function(){return new Ie(this.storageUrl,this.headers,this.fetch)}},{key:"from",value:function(e){return this.rest.from(e)}},{key:"rpc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return this.rest.rpc(e,t,r)}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}},{key:"getChannels",value:function(){return this.realtime.getChannels()}},{key:"removeChannel",value:function(e){return this.realtime.removeChannel(e)}},{key:"removeAllChannels",value:function(){return this.realtime.removeAllChannels()}},{key:"_getAccessToken",value:function(){var e,t;return Et(this,void 0,void 0,(0,n.Z)().mark((function r(){var i,s;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.auth.getSession();case 2:return i=r.sent,s=i.data,r.abrupt("return",null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null);case 5:case"end":return r.stop()}}),r,this)})))}},{key:"_initSupabaseAuthClient",value:function(e,t,r){var n=e.autoRefreshToken,i=e.persistSession,s=e.detectSessionInUrl,o=e.storage,a=e.storageKey,c={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new _t({url:this.authUrl,headers:Object.assign(Object.assign({},c),t),storageKey:a,autoRefreshToken:n,persistSession:i,detectSessionInUrl:s,storage:o,fetch:r})}},{key:"_initRealtimeClient",value:function(e){return new le(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}},{key:"_listenForAuthEvents",value:function(){var e=this;return this.auth.onAuthStateChange((function(t,r){e._handleTokenChanged(t,null===r||void 0===r?void 0:r.access_token,"CLIENT")}))}},{key:"_handleTokenChanged",value:function(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===t?"SIGNED_OUT"!==e&&"USER_DELETED"!==e||(this.realtime.setAuth(this.supabaseKey),"STORAGE"==r&&this.auth.signOut()):(this.realtime.setAuth(null!==t&&void 0!==t?t:null),this.changedAccessToken=t)}}]),e}(),Pt=function(e,t,r){return new jt(e,t,r)}},4255:function(e,t){var r="undefined"!==typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!==typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function p(e){var t=new FileReader,r=v(t);return t.readAsArrayBuffer(e),r}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=v(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=u(e),t=h(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[u(e)]},f.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},f.prototype.set=function(e,t){this.map[u(e)]=h(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),l(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),l(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),l(e)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(e,t){var r=(t=t||{}).body;if(e instanceof k){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=function(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function g(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function w(e){var t=new f;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t}function x(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},y.call(k.prototype),y.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];x.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(T){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(e,r){return new Promise((function(n,s){var o=new k(e,r);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:w(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new x(t,e))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}E.polyfill=!0,e.fetch||(e.fetch=E,e.Headers=f,e.Request=k,e.Response=x),t.Headers=f,t.Request=k,t.Response=x,t.fetch=E,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},4210:function(e){var t=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},5087:function(e,t,r){var n;if("object"===typeof globalThis)n=globalThis;else try{n=r(4210)}catch(a){}finally{if(n||"undefined"===typeof window||(n=window),!n)throw new Error("Could not determine global this")}var i=n.WebSocket||n.MozWebSocket,s=r(1496);function o(e,t){return t?new i(e,t):new i(e)}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return i[e]}})})),e.exports={w3cwebsocket:i?o:null,version:s}},1496:function(e,t,r){e.exports=r(9794).version},9794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=565.272787e4.chunk.js.map