"use strict";(self.webpackChunkfamilyDirectory=self.webpackChunkfamilyDirectory||[]).push([[680],{9174:function(e,n,t){var a=(0,t(3565).createClient)("https://bnyaacwroakthbkyxsss.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJueWFhY3dyb2FrdGhia3l4c3NzIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NjgxOTE5MTAsImV4cCI6MTk4Mzc2NzkxMH0.9b_0eVf-liwfOBoTypuYgHQLEk8SnMGAgnm0lgU3diQ");n.Z=a},7801:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var a=t(9439),i=t(573),o=t(7935),r=(t(7902),t(8332)),l=(t(1197),t(3220)),c=t(2791),s=(t(5914),t(4165)),u=t(5861),f=t(9174),E=t(184);function h(e){var n=e.onSuccess,t=e.onError,a=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(a){var i,o,r,l,c,u,E;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.target.files&&(o=a.target.files[0]),r=null===(i=o)||void 0===i?void 0:i.name.split(".").pop(),l="".concat((new Date).getTime(),".").concat(r),e.next=5,f.Z.storage.from("family").upload("avatar/"+l,o);case 5:c=e.sent,u=c.data,E=c.error,u&&n(u.path),E&&t(E);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,E.jsx)("input",{type:"file",name:"file",id:"file",onChange:a})}var d=t(1228);function A(e,n){return e.NAME=p(e.NAME),"H"!=n.Relation&&("W"!=n.Relation||n.Parent!=e.No||"H"!=n.Relation&&"W"!=n.Relation&&"S"!=n.Relation)||(e.SPOUSE=n.NAME),e}function R(e,n){return console.log("inside fillRemainingDetails: "+n.NAME),console.log(e),n.NAME=p(n.NAME),""!=e.EMAILID&&(e.EMAILID=e.EMAILID.toLowerCase()),""!=n.EMAILID&&(n.EMAILID=n.EMAILID.toLowerCase()),"H"!=n.Relation&&"W"!=n.Relation||(n.DOA=e.DOA,n.SPOUSE=e.NAME),"S"!=n.Relation&&"D"!=n.Relation||(console.log(e.children.length),n.FATHER=null==e.children||""!=e.Relation&&"S"!=e.Relation?e.children.length>0&&"H"==e.children[0].Relation?e.children[0].NAME:"":e.NAME,n.MOTHER=null==e.children||""!=e.Relation&&"D"!=e.Relation?e.children.length>0&&"W"==e.children[0].Relation?e.children[0].NAME:"":e.NAME),"W"!=n.Relation&&"H"!=n.Relation||n.Parent!=e.No||(""!=e.FATHERINLAW&&(e.FATHERINLAW=p(e.FATHERINLAW)),""!=e.MOTHERINLAW&&(e.MOTHERINLAW=p(e.MOTHERINLAW)),n.FATHER=e.FATHERINLAW,n.MOTHER=e.MOTHERINLAW,n.FATHERINLAW=e.FATHER,n.MOTHERINLAW=e.MOTHER),""==n.RESPHNO&&n.Parent==e.No&&(n.RESPHNO=e.RESPHNO),console.log(n),n}function p(e){return console.log(e.split(" ")),"undefined"!==typeof e?e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})).join(" "):""}function I(){var e,n,t=(0,o.jw)("selectedMember"),s=("".concat(null===t||void 0===t||null===(e=t.name)||void 0===e?void 0:e.first," ").concat(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.last),[]);s.push(function(e){var n=[],t={};for(var a in e.forEach((function(e){var n=e.No;t.hasOwnProperty(n)||(t[n]=e,t[n].children=[])})),e.forEach((function(e){var n=e.Parent;if(!t.hasOwnProperty(n)){var a=e;a.key=0,a.Name=e.NAME,a.Parent=e.Parent,t[n]=a,t[n].children=[]}})),t)if(t.hasOwnProperty(a)){var i=t[a];if(i.key=i.No,i.Parent){var o=i.Parent,r=i,l=t[o];r=R(l=A(l,r),r),console.log("after fillRemainingDetails: "),console.log(r),l.children.push(r)}else n.push(i)}return n[0]}(d));var u=(0,c.useState)((function(){return s})),f=(0,a.Z)(u,2),p=f[0],I=(f[1],(0,c.useState)((function(){return d}))),N=(0,a.Z)(I,2),M=(N[0],N[1],(0,c.useState)("")),v=(0,a.Z)(M,2),g=v[0],m=v[1];return console.log(p),(0,E.jsxs)(l.Z,{children:[(0,E.jsx)(i.Z,{headerTitle:"Family Details"}),(0,E.jsx)(h,{onSuccess:function(e){m("https://bnyaacwroakthbkyxsss.supabase.co/storage/v1/object/public/family/"+e)},onError:function(e){console.log(e)}}),g&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("img",{width:200,src:g,alt:""}),(0,E.jsx)("input",{type:"hidden",name:"avatar",value:g})]}),(0,E.jsx)(r.Z,{treeData:p})]})}}}]);
//# sourceMappingURL=680.f59a9693.chunk.js.map